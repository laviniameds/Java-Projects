
public class Maquina {
	
	private double credito;
	private double lucroTotal;
	private Moeda moeda;
	private Produto produtos[];
	
	public void receberCredito(int moedas){
		moeda.setMoeda(moedas);
		credito += moeda.getValor();
	}
	
	public Produto[] visualizarProdutos(){
		Produto aux[] = new Produto[produtos.length]
					
	}
	
	public double fazerCompra(int codigo){
		Produto p = selecionarProduto(codigo);
		double precoProduto = p.getPreco();
		if(credito >= precoProduto){
			lucroTotal += precoProduto;
			credito -= precoProduto;
			removerProduto(p);
			double troco = darTroco(precoProduto);
			credito = 0;
			return troco;
		}
		else return credito;
	}
	
	public void removerProduto(Produto p){
		for(int i=0;i<produtos.length;i++)
			if(produtos[i].getCodigo() == p.getCodigo()){
				produtos[i] = null;
				break;
			}
	}
	
	public Produto selecionarProduto(int codigo){
		for(int i=0;i<produtos.length;i++){
			if((produtos[i] != null) && (codigo == produtos[i].getCodigo())){
				return produtos[i];
			}
		}
		return null;
	}
	
	public double cancelarCompra(){
		return credito;
	}
	
	public double darTroco(double preco){
		if((credito != 0) && (lucroTotal >= credito))
			return credito;
		else return 0;		
	}
	
	public double visualizarCredito(){
		return credito;
	}
	
	public double visualizarLucroTotal(){
		return lucroTotal;
	}
	
	public void encherMaquina(){
		for(int i=0;i<30;i++){
			if(i < 10)
				produtos[i] = new Produto(1, "coca", 3.50);
			else if(i>9 && i <20)
				produtos[i] = new Produto(2, "guaranÃ¡", 2.50);
			else if(i>19 && i <30)
				produtos[i] = new Produto(3, "pepsi", 3.00);
		}
	}
	
	public Maquina(){
		produtos = new Produto[30];
		moeda = new Moeda();
		encherMaquina();
	}
	
}
